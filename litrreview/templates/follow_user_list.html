{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block title %}
Tous les abonnes de {{ user }}
{% endblock title %}


{% block content %}
<form action="" method="post">
    <h1>Suive d'autres utilisateurs</h1>
    {% csrf_token %}
    {% if form.errors %}
    {% for field in form %}
    {% for error in field.errors %}
    <div class="alert alert-danger">
        <strong>{{ error|escape }}</strong>
    </div>
    {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
    <div class="alert alert-danger">
        <strong>{{ error|escape }}</strong>
    </div>
    {% endfor %}
    {% endif %}

    {{ form.follower  }}
    <input type="submit" value="Envoyer">
</form>

<h1>Abonnements</h1>
{% for follow in follow_user %}
<table style="border: 1px solid black;width: 50%;">
    <tr>
        <th style="border: 1px solid black;">{{ follow.followed_user }}</th>
        <td style="border: 1px solid black;">
            <a type="button" role="button" href="{% url 'follow_delete' follow.id %}">Unfollow</a>
        </td>
    </tr>
</table>


{% endfor %}

<h1>Abonnees</h1>
{% for follower in followed_by %}
<table style="border: 1px solid black;width: 50%;">
    <tr>
        <td>
            {{ follower.user }}
        </td>
    </tr>
</table>
{% endfor %}

{% endblock content %}